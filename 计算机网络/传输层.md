# 传输层
- ## 无连接运输：UDP
  - 用户数据报协议（UDP）是无连接的，尽最大可能，但不保证交付，支持一对一、一对多、多对一和多对多通信。
  - **特点：**
    - 无须建立连接
    - 无连接状态
    - 分组首部开销小。TCP报文首部有20字节开销，UDP只有8字节。
  - **首部格式：**(图片来源：计算机网络：自顶向下方法 3.3.1  UDP 报文段结构)
  - ![](UDP首部.jpg)
- ## 面向连接的运输：TCP
  - ### 特点：
    - 面向连接的，提供可靠交付，有流量控制，拥塞控制，提供全双工通信，只能一对一通信。
  - ### 首部格式
  - ![(图片来源：计算机网络：自顶向下方法 3.5.2  TCP 报文段结构)](TCP首部结构.jpg)
    - **序号**：用于对字节流编号。
    - **确认号**：期望收到的下一个报文段的序号
    - **数据偏移**：数据部分距报文段的偏移量，指首部长度。
    - **紧急URG**：URG=1时，表明紧急指针字段有效，此数据段有应先发送此高优先级数据。
    - **复位RST**：RST为1时TCP出现错误，要重新建立连接。
    - **确认ACK**：当ACK=1时确认号字段有效，否则无效。TCP规定建立连接后的所有报文段都必须将ACK置为1。
    - **同步SYN**：建立连接时用来同步序号，SYN=1，ACK=0表示是一个请求连接报文段，若对方同意，则变为SYN=1，ACK=1。
    - **终止FIN**：FIN=1时表示数据已经传输完毕。
    - **窗口**：窗口值作为接收方让发送方设置发送窗口的依据。
  - ### 三次握手
  - ### 四次挥手
  - ### 可靠传输
  - ### 滑动窗口
  - ### 流量控制
  - ### 拥塞控制
- ## TCP与UDP适用场景
|  应用  | 应用层协议 | 运输协议 |
|  :----:  | :----:  | :----:  |
| 电子邮件 | SMTP | **TCP** |
| 远程终端访问 | Telnet | **TCP** |
| Web | HTTP | **TCP** |
| 文件传输 | FTP | **TCP** |
| 远程文件服务器 | NFS | **通常UDP** |
| 流式多媒体 | 通常专用 | **UDP或TCP** |
| 因特网电话 | 通常专用 | **UDP或TCP** |
| 网络管理 | SNMP | **通常UDP** |
| 名字转换 | DNS | **通常UDP** |

