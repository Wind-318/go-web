# 正则表达式
- ## 正则表达式规则
  - `?` 符号紧跟在其它限定符（*、+、?、{n}）等之后时，匹配模式为**非贪婪匹配**，即匹配搜索到的尽可能短的字符串，当遇到第一个不符合的字符就停止匹配。默认的贪婪匹配则是在遇到最后一个不符合要求的字符时才停止匹配。
  - **[ABC]**：匹配中括号中所有字符，这里匹配 ABC
  - **[^ABC]**：匹配所有非中括号中的字符，这里匹配除 ABC 以外的字符
  - **[A-Z]**：匹配 A 到 Z 的所有字符
  - **`.`**：匹配除换行符外的字符
  - **[\s\S]**：\s 匹配所有空白字符，\S 匹配所有非空白字符，这里匹配所有字符
  - **\w**：匹配字母数字和下划线
  - **`*`**：匹配前面的表达式零次或多次
  - **`+`**：匹配前面的表达式一次或多次
  - **`?`**：匹配前面的表达式零次或一次，或者表示非贪婪限定
- ## 函数
    | 函数 | 作用 |
    | :-: | :-: |
    | func MustCompile(str string) *Regexp | 编译正则表达式，返回一个 Regexp 对象 |
    | FindString | 查询匹配内容 |
    | FindAllString | 查询所有匹配内容 |
    | func (re *Regexp) FindStringSubmatch(s string) []string | 返回第一个匹配的内容 |
    | func (re *Regexp) FindAllStringSubmatch(s string, n int) [][]string | 对应的 All 版本，返回所有匹配 |
    | func (re *Regexp) ReplaceAllString(src, repl string) string | 用 repl 替换 src 中正则匹配的内容 |
    | func (re *Regexp) ReplaceAllStringFunc(src string, repl func(string) string) string | 用自定义函数替换正则匹配的内容 |
- ## 用正则表达式处理 html 样例
  ```Go
    package main

    import (
        "fmt"
        "io/ioutil"
        "net/http"
        "os"
        "regexp"
        "time"
    )

    func main() {
        res, _ := http.Get("https://www.zhihu.com/question/339135205")
        defer res.Body.Close()

        html, _ := ioutil.ReadAll(res.Body)

        // 获取一个正则表达对象
        obj := regexp.MustCompile(`<a href="([\s\S]+?)"[\s\S]+?>([\s\S]+?)</a>`)
        // 得到字符串
        arr := obj.FindAllStringSubmatch(string(html), -1)

        target := make([]string, 0)
        name := make([]string, 0)

        for i, n := 3, len(arr); i < n; i++ {
            target = append(target, arr[i][1][66:72])
            name = append(name, arr[i][2])
        }

        // 创建一个目录
        err := os.Mkdir(`.\面经`, os.ModePerm)
        if err != nil {
            fmt.Println(err)
        }

        for index, val := range target {
            // 请求 url
            url := "https://www.nowcoder.com/discuss/" + val + "?from=zhnkw"
            // 查找特殊字符，文件名不能包含这些字符
            objs := regexp.MustCompile(`[\/:*?"<>|]`)
            // 替换为空字符
            name[index] = objs.ReplaceAllString(name[index], "")

            get(url, name[index])
        }
    }

    func get(url, name string) {
        clients := &http.Client{
            Timeout: 3 * time.Second,
        }
        req, err := http.NewRequest("GET", url, nil)
        if err != nil {
            fmt.Println(err)
            return
        }

        res, err := clients.Do(req)
        defer res.Body.Close()
        if err != nil {
            fmt.Println(err)
            return
        }

        html, err := ioutil.ReadAll(res.Body)
        if err != nil {
            fmt.Println(err)
            return
        }

        err = ioutil.WriteFile(`.\面经\`+name+`.html`, html, 0644)
        if err != nil {
            fmt.Println(err)
        }
    }
  ```


# 参考
- #### [https://www.zhihu.com/question/339135205](https://www.zhihu.com/question/339135205)(牛客发的 500 篇面经)